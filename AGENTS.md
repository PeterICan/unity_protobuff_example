# AGENTS.mdï¼šå°ˆæ¡ˆå”ä½œæŒ‡å—èˆ‡å¯¦ä½œæ¸…å–®

## ä½¿ç”¨è€…åå¥½

- å°ˆæ¡ˆç›¸é—œçš„ä»»ä½•æ–‡ä»¶ç”¢å‡ºã€è¨è«–ã€è¨»è§£éƒ½è«‹ä½¿ç”¨ä¸­æ–‡ã€‚

## å”ä½œæµç¨‹ (Collaboration Workflow)

- **ä»»å‹™ç¢ºèª**: åœ¨å®Œæˆä¸€å€‹ä¸»è¦ä»»å‹™ï¼ˆä¾‹å¦‚ TODO åˆ—è¡¨ä¸­çš„ä¸€å€‹ç·¨è™Ÿé …ï¼‰å¾Œï¼Œæˆ‘æœƒå‘æ‚¨å ±å‘Šé€²åº¦ã€‚åœ¨ç¹¼çºŒä¸‹ä¸€å€‹ä»»å‹™ä¹‹å‰ï¼Œæˆ‘éœ€è¦å¾—åˆ°æ‚¨çš„ç¢ºèªã€‚è«‹å›è¦†ã€Œå¥½çš„ã€ã€ã€Œç¹¼çºŒã€æˆ–æä¾›é€²ä¸€æ­¥çš„æŒ‡ç¤ºï¼Œä»¥ç¢ºä¿æˆ‘å€‘çš„å”ä½œä¿æŒåŒæ­¥ã€‚

## å°ˆæ¡ˆç‹€æ…‹èˆ‡æ ¸å¿ƒç›®æ¨™

| é …ç›® | æè¿° | ç‹€æ…‹ |
| :--- | :--- | :--- |
| **å°ˆæ¡ˆåç¨±** | æ‡‰ç”¨å±¤é€šè¨ŠæŠ½è±¡èˆ‡å”å®šå¯¦é©—å°ˆæ¡ˆ | è¦åŠƒèª¿æ•´ |
| **ç›®æ¨™** | å¯¦ä½œä¸€å€‹**é›™é‡è§£è€¦**çš„ Server/Client æ¶æ§‹ï¼Œå¯¦é©— **Protobuf/TCP** èˆ‡ **JSON/WebSocket** å…©ç¨®é€šè¨Šæ¨¡å¼ã€‚ | å·²ç¢ºèª |
| **æ ¸å¿ƒæŠ€è¡“** | Go Server (**antnet æ¡†æ¶**) / Unity Client / Protobuf / JSON | å·²ç¢ºèª |

---

## æ ¸å¿ƒè¨­è¨ˆç†å¿µï¼šé›™é‡æŠ½è±¡ (Decoupling)

æœ¬å°ˆæ¡ˆå°‡æ¥­å‹™é‚è¼¯èˆ‡é€šè¨Šç´°ç¯€åˆ†é›¢æˆå…©å±¤æŠ½è±¡ã€‚**æ³¨æ„ï¼šåœ¨æ–°çš„è¨ˆç•«ä¸­ï¼ŒServer ç«¯çš„æŠ½è±¡å±¤ç”± `antnet` æ¡†æ¶æä¾›ï¼Œæˆ‘å€‘çš„å·¥ä½œæ˜¯ä½¿ç”¨å…¶ APIã€‚Client ç«¯ä»éœ€è‡ªè¡Œå¯¦ç¾æŠ½è±¡å±¤ã€‚**

| æŠ½è±¡å±¤ | è² è²¬åŠŸèƒ½ | é—œéµä»‹é¢ (ç¤ºä¾‹) | æ›¿æ›å¯¦ä½œ (æ¨¡å¼ I / æ¨¡å¼ II) |
| :--- | :--- | :--- | :--- |
| **è³‡æ–™æ ¼å¼** | è™•ç†åŸç”Ÿæ¨¡å‹èˆ‡äºŒé€²ä½/æ–‡å­—é–“çš„è½‰æ›ã€‚ | `ISerializer` | ProtobufSerializer / JSONSerializer |
| **å‚³è¼¸å”å®š** | è™•ç†ç¶²è·¯é€£ç·šã€Socket I/O æˆ– WebSocket è«‹æ±‚ã€‚ | `IConnection` | TCPTransport / WebSocketTransport |

---

## ğŸ“‹ æ¥ä¸‹ä¾†çš„ TODO åˆ—è¡¨ (Next Steps) - *å·²èª¿æ•´ç‚ºä½ç½®å„ªå…ˆçš„é–‹ç™¼é †åº*

### éšæ®µä¸€ï¼šåŸºç¤è¨­å®š (1-2)

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ/ç‹€æ…‹ |
| :--- | :--- | :--- | :--- |
| 1 | **æª¢æŸ¥ç¾æœ‰ Go Server ç‹€æ…‹** | æª¢æŸ¥ `server/go.mod` å’Œ `server/main.go` çš„ç•¶å‰ç‹€æ…‹ï¼Œç¢ºèª antnet ä¾è³´æ˜¯å¦æ­£ç¢ºè¨­å®š | ç¢ºèªç¾æœ‰è¨­å®šç‹€æ…‹ |
| 2 | **æ›´æ–° antnet ä¾è³´è¨­å®š** | ç¢ºä¿ `server/go.mod` ä¸­åŒ…å«æ­£ç¢ºçš„ antnet ä¾è³´ï¼Œå¦‚éœ€è¦å‰‡åŸ·è¡Œ `go get` æ›´æ–° | `server/go.mod` æ›´æ–° |

### éšæ®µäºŒï¼šä½ç½®åŠŸèƒ½å„ªå…ˆ (3-9)

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 3 | **å®šç¾©ä½ç½®è³‡æ–™æ¨¡å‹** | åœ¨ `common/types.go` å’Œ `common/Types.cs` ä¸­å®šç¾© `PlayerPosition`ã€`PositionUpdate` ç­‰ä½ç½®ç›¸é—œçš„æ ¸å¿ƒè³‡æ–™çµæ§‹ | `common/types.go`, `common/Types.cs` |
| 4 | **å»ºç«‹ä½ç½®è™•ç† Handler** | å»ºç«‹ `server/handlers/position.go`ï¼Œè™•ç†ä½ç½®æ›´æ–°å’Œå»£æ’­çš„æ¥­å‹™é‚è¼¯ | `server/handlers/position.go` |
| 5 | **å¯¦ä½œ antnet TCP ä¼ºæœå™¨è¨­å®š** | æ›´æ–° `server/main.go`ï¼Œè¨­å®š antnet ç›£è½ TCP åŸ ä¸¦ä½¿ç”¨ Protobuf è§£æå™¨è™•ç†ä½ç½®è¨Šæ¯ | `server/main.go` æ›´æ–° |
| 6 | **å¯¦ä½œ Client ç«¯æŠ½è±¡ä»‹é¢** | åœ¨ Unity Client ä¸­å®šç¾© `ISerializer` å’Œ `IConnection` ä»‹é¢ï¼Œå»ºç«‹æŠ½è±¡å±¤åŸºç¤ | `Client/Scripts/ISerializer.cs`, `Client/Scripts/IConnection.cs` |
| 7 | **å¯¦ä½œ ProtobufSerializer** | åœ¨ `Client/Scripts/` ä¸­å¯¦ä½œ `ProtobufSerializer.cs`ï¼Œè™•ç† Protobuf æ ¼å¼åºåˆ—åŒ– | `Client/Scripts/ProtobufSerializer.cs` |
| 8 | **å¯¦ä½œ TCPClientTransport** | åœ¨ `Client/Scripts/` ä¸­å¯¦ä½œ `TCPClientTransport.cs`ï¼Œä½¿ç”¨ TcpClient é€£æ¥åˆ° antnet ä¼ºæœå™¨ | `Client/Scripts/TCPClientTransport.cs` |
| 9 | **é€²è¡Œ TCP/Protobuf ä½ç½®æ¸¬è©¦** | æ¸¬è©¦ Client ç™¼é€ä½ç½®æ›´æ–°ï¼ŒServer è™•ç†ä¸¦å›æ‡‰çš„å®Œæ•´ TCP æµç¨‹ | åŠŸèƒ½å¯é‹ä½œ |

### éšæ®µä¸‰ï¼šWebSocket æ¨¡å¼ (10-13)

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 10 | **è¨­å®š antnet WebSocket ç«¯é»** | æ›´æ–° `server/main.go`ï¼Œæ–°å¢ WebSocket ç›£è½åŸ ä¸¦ä½¿ç”¨ JSON è§£æå™¨ | `server/main.go` æ›´æ–° |
| 11 | **å¯¦ä½œ JSONSerializer** | åœ¨ `Client/Scripts/` ä¸­å¯¦ä½œ `JSONSerializer.cs`ï¼Œè™•ç† JSON æ ¼å¼åºåˆ—åŒ– | `Client/Scripts/JSONSerializer.cs` |
| 12 | **å¯¦ä½œ WebSocketClientTransport** | åœ¨ `Client/Scripts/` ä¸­å¯¦ä½œ `WebSocketClientTransport.cs`ï¼Œé€£æ¥åˆ° antnet çš„ WebSocket ç«¯é» | `Client/Scripts/WebSocketClientTransport.cs` |
| 13 | **é€²è¡Œ WebSocket/JSON ä½ç½®æ¸¬è©¦** | æ¸¬è©¦ Client ç™¼é€ä½ç½®æ›´æ–°ï¼ŒServer è™•ç†ä¸¦å»£æ’­çš„å®Œæ•´ WebSocket æµç¨‹ | åŠŸèƒ½å¯é‹ä½œ |

### éšæ®µå››ï¼šåŸºç¤ UI (14)

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 14 | **å¯¦ä½œåŸºç¤ Viewer ä»‹é¢** | å»ºç«‹ç°¡åŒ–çš„ `NetworkViewer.cs`ï¼Œå°ˆæ³¨æ–¼ä½ç½®æ›´æ–°åŠŸèƒ½çš„ UI ä»‹é¢æ¸¬è©¦ | `Client/Scripts/NetworkViewer.cs` |

### éšæ®µäº”ï¼šç™»å…¥åŠŸèƒ½ (15-17) - *å»¶å¾ŒåŸ·è¡Œ*

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 15 | **å®šç¾©ç™»å…¥è³‡æ–™æ¨¡å‹** | åœ¨ common ä¸­å®šç¾© `UserCredentials`ã€`LoginResponse` ç­‰ç™»å…¥ç›¸é—œè³‡æ–™çµæ§‹ | æ›´æ–° `common/types.go`, `common/Types.cs` |
| 16 | **å»ºç«‹ç™»å…¥è™•ç† Handler** | å»ºç«‹ `server/handlers/login.go`ï¼Œè™•ç†ç™»å…¥é©—è­‰çš„æ¥­å‹™é‚è¼¯ | `server/handlers/login.go` |
| 17 | **å®Œæ•´ Unity Client Viewer ä»‹é¢** | æ“´å±• NetworkViewerï¼Œæ–°å¢ç™»å…¥é©—è­‰åŠŸèƒ½å’Œå®Œæ•´çš„ UI æ¸¬è©¦ä»‹é¢ | `Client/Scripts/NetworkViewer.cs` æ›´æ–° |

### éšæ®µå…­ï¼šæœ€çµ‚æ•´åˆ (18)

| # | ä»»å‹™ | æè¿° | é æœŸè¼¸å‡ºæª”æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 18 | **æ•´åˆæ¸¬è©¦å’Œæœ€çµ‚é©—è­‰** | é€²è¡Œå®Œæ•´çš„é›™é‡æŠ½è±¡æ¶æ§‹æ¸¬è©¦ï¼Œç¢ºèªæ‰€æœ‰åŠŸèƒ½ï¼ˆä½ç½®+ç™»å…¥ï¼‰æ­£å¸¸é‹ä½œ | åŠŸèƒ½å¯é‹ä½œ |
